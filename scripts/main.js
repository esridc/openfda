(function(){function t(t,e){if(t!==e){var n=null===t,r=t===m,i=t===t,a=null===e,o=e===m,u=e===e;if(t>e&&!a||!i||n&&!o&&u||r&&u)return 1;if(e>t&&!n||!u||a&&!r&&i||o&&i)return-1}return 0}function e(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function n(t,e,n){if(e!==e)return f(t,n);n-=1;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function r(t){return"function"==typeof t||!1}function i(t){return"string"==typeof t?t:null==t?"":t+""}function a(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function o(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function u(e,n){return t(e.a,n.a)||e.b-n.b}function l(t){return jt[t]}function c(t){return Et[t]}function s(t){return"\\"+Bt[t]}function f(t,e,n){var r=t.length;for(e+=n?0:-1;n?e--:++e<r;){var i=t[e];if(i!==i)return e}return-1}function p(t){return!!t&&"object"==typeof t}function d(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function h(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;)t[n]===e&&(t[n]=Y,a[++i]=n);return a}function v(t){for(var e=-1,n=t.length;++e<n&&d(t.charCodeAt(e)););return e}function g(t){for(var e=t.length;e--&&d(t.charCodeAt(e)););return e}function _(t){return Yt[t]}function y(d){function jt(t){if(p(t)&&!(Ra(t)||t instanceof Ft)){if(t instanceof Yt)return t;if(ni.call(t,"__chain__")&&ni.call(t,"__wrapped__"))return Un(t)}return new Yt(t)}function Et(){}function Yt(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Ft(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Ni,this.__views__=null}function Bt(){this.__data__={}}function Ut(t){var e=t?t.length:0;for(this.data={hash:wi(null),set:new vi};e--;)this.push(t[e])}function Pt(t,e){var n=t.data;return("string"==typeof e||vr(e)?n.set.has(e):n.hash[e])?0:-1}function Wt(t,e){var n=-1,r=t.length;for(e||(e=Ur(r));++n<r;)e[n]=t[n];return e}function Gt(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function zt(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ht(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[++i]=o)}return a}function Zt(t,e){for(var n=-1,r=t.length,i=Ur(r);++n<r;)i[n]=e(t[n],n,t);return i}function Jt(t,e,n,r){var i=-1,a=t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function qt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Xt(t,e){return t===m?e:t}function Qt(t,e,n,r){return t!==m&&ni.call(r,n)?t:e}function te(t,e,n){for(var r=-1,i=za(e),a=i.length;++r<a;){var o=i[r],u=t[o],l=n(u,e[o],o,t,e);(l===l?l===u:u!==u)&&(u!==m||o in t)||(t[o]=l)}return t}function ee(t,e){return null==e?t:re(e,za(e),t)}function ne(t,e){for(var n=-1,r=null==t,i=!r&&Cn(t),a=i?t.length:0,o=e.length,u=Ur(o);++n<o;){var l=e[n];u[n]=i?In(l,a)?t[l]:m:r?m:t[l]}return u}function re(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var a=e[r];n[a]=t[a]}return n}function ie(t,e,n){var r=typeof t;return"function"==r?e===m?t:Be(t,e,n):null==t?jr:"object"==r?we(t):e===m?Br(t):xe(t,e)}function ae(t,e,n,r,i,a,o){var u;if(n&&(u=i?n(t,r,i):n(t)),u!==m)return u;if(!vr(t))return t;if(r=Ra(t)){if(u=On(t),!e)return Wt(t,u)}else{var l=ii.call(t),c=l==G;if(l!=K&&l!=F&&(!c||i))return Dt[l]?Mn(t,l,e):i?t:{};if(u=$n(c?{}:t),!e)return ee(u,t)}for(a||(a=[]),o||(o=[]),i=a.length;i--;)if(a[i]==t)return o[i];return a.push(t),o.push(u),(r?Gt:he)(t,function(r,i){u[i]=ae(r,e,n,i,t,a,o)}),u}function oe(t,e,n){if("function"!=typeof t)throw new Jr(E);return gi(function(){t.apply(m,n)},e)}function ue(t,e){var r=t?t.length:0,i=[];if(!r)return i;var a=-1,o=wn(),u=o==n,l=u&&200<=e.length?Ki(e):null,c=e.length;l&&(o=Pt,u=!1,e=l);t:for(;++a<r;)if(l=t[a],u&&l===l){for(var s=c;s--;)if(e[s]===l)continue t;i.push(l)}else 0>o(e,l,0)&&i.push(l);return i}function le(t,e){var n=!0;return Ui(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ce(t,e,n,r){var i=r,a=i;return Ui(t,function(t,o,u){o=+e(t,o,u),(n(o,i)||o===r&&o===a)&&(i=o,a=t)}),a}function se(t,e){var n=[];return Ui(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function fe(t,e,n,r){var i;return n(t,function(t,n,a){return e(t,n,a)?(i=r?n:t,!1):void 0}),i}function pe(t,e,n){for(var r=-1,i=t.length,a=-1,o=[];++r<i;){var u=t[r];if(p(u)&&Cn(u)&&(n||Ra(u)||fr(u))){e&&(u=pe(u,e,n));for(var l=-1,c=u.length;++l<c;)o[++a]=u[l]}else n||(o[++a]=u)}return o}function de(t,e){Wi(t,e,$r)}function he(t,e){return Wi(t,e,za)}function ve(t,e){return Gi(t,e,za)}function ge(t,e){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];Ta(t[o])&&(a[++i]=o)}return a}function _e(t,e,n){if(null!=t){n!==m&&n in Fn(t)&&(e=[n]),n=0;for(var r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:m}}function ye(t,e,n,r,i,a){if(t===e)t=!0;else if(null==t||null==e||!vr(t)&&!p(e))t=t!==t&&e!==e;else t:{var o=ye,u=Ra(t),l=Ra(e),c=B,s=B;u||(c=ii.call(t),c==F?c=K:c!=K&&(u=br(t))),l||(s=ii.call(e),s==F?s=K:s!=K&&br(e));var f=c==K,l=s==K,s=c==s;if(!s||u||f){if(!r&&(c=f&&ni.call(t,"__wrapped__"),l=l&&ni.call(e,"__wrapped__"),c||l)){t=o(c?t.value():t,l?e.value():e,n,r,i,a);break t}if(s){for(i||(i=[]),a||(a=[]),c=i.length;c--;)if(i[c]==t){t=a[c]==e;break t}i.push(t),a.push(e),t=(u?gn:yn)(t,e,o,n,r,i,a),i.pop(),a.pop()}else t=!1}else t=_n(t,e,c)}return t}function me(t,e,n){var r=e.length,i=r,a=!n;if(null==t)return!i;for(t=Fn(t);r--;){var o=e[r];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<i;){var o=e[r],u=o[0],l=t[u],c=o[1];if(a&&o[2]){if(l===m&&!(u in t))return!1}else if(o=n?n(l,c,u):m,o===m?!ye(c,l,n,!0):!o)return!1}return!0}function be(t,e){var n=-1,r=Cn(t)?Ur(t.length):[];return Ui(t,function(t,i,a){r[++n]=e(t,i,a)}),r}function we(t){var e=xn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==m||n in Fn(t))}}return function(t){return me(t,e)}}function xe(t,e){var n=Ra(t),r=Ln(t)&&e===e&&!vr(e),i=t+"";return t=Bn(t),function(a){if(null==a)return!1;var o=i;if(a=Fn(a),!(!n&&r||o in a)){if(a=1==t.length?a:_e(a,Ie(t,0,-1)),null==a)return!1;o=Kn(t),a=Fn(a)}return a[o]===e?e!==m||o in a:ye(e,a[o],m,!0)}}function Ae(t,e,n,r,i){if(!vr(t))return t;var a=Cn(e)&&(Ra(e)||br(e)),o=a?null:za(e);return Gt(o||e,function(u,l){if(o&&(l=u,u=e[l]),p(u)){r||(r=[]),i||(i=[]);t:{for(var c=l,s=r,f=i,d=s.length,h=e[c];d--;)if(s[d]==h){t[c]=f[d];break t}var d=t[c],v=n?n(d,h,c,t,e):m,g=v===m;g&&(v=h,Cn(h)&&(Ra(h)||br(h))?v=Ra(d)?d:Cn(d)?Wt(d):[]:ja(h)||fr(h)?v=fr(d)?Ar(d):ja(d)?d:{}:g=!1),s.push(h),f.push(v),g?t[c]=Ae(v,h,n,s,f):(v===v?v!==d:d===d)&&(t[c]=v)}}else c=t[l],s=n?n(c,u,l,t,e):m,(f=s===m)&&(s=u),s===m&&(!a||l in t)||!f&&(s===s?s===c:c!==c)||(t[l]=s)}),t}function Oe(t){return function(e){return null==e?m:e[t]}}function $e(t){var e=t+"";return t=Bn(t),function(n){return _e(n,t,e)}}function Me(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&In(r)){var i=r;_i.call(t,r,1)}}}function Se(t,e){return t+fi(ki()*(e-t+1))}function Ce(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function Ie(t,e,n){var r=-1,i=t.length;for(e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===m||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,n=Ur(i);++r<i;)n[r]=t[r+e];return n}function ke(t,e){var n;return Ui(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Le(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function Ne(e,n,r){var i=mn(),a=-1;return n=Zt(n,function(t){return i(t)}),e=be(e,function(t){return{a:Zt(n,function(e){return e(t)}),b:++a,c:t}}),Le(e,function(e,n){var i;t:{i=-1;for(var a=e.a,o=n.a,u=a.length,l=r.length;++i<u;){var c=t(a[i],o[i]);if(c){i=l>i?c*(r[i]?1:-1):c;break t}}i=e.b-n.b}return i})}function Re(t,e){var n=0;return Ui(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function De(t,e){var r=-1,i=wn(),a=t.length,o=i==n,u=o&&a>=200,l=u?Ki():null,c=[];l?(i=Pt,o=!1):(u=!1,l=e?[]:c);t:for(;++r<a;){var s=t[r],f=e?e(s,r,t):s;if(o&&s===s){for(var p=l.length;p--;)if(l[p]===f)continue t;e&&l.push(f),c.push(s)}else 0>i(l,f,0)&&((e||u)&&l.push(f),c.push(s))}return c}function Te(t,e){for(var n=-1,r=e.length,i=Ur(r);++n<r;)i[n]=t[e[n]];return i}function je(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Ie(t,r?0:a,r?a+1:i):Ie(t,r?a+1:0,r?i:a)}function Ee(t,e){var n=t;n instanceof Ft&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var n=[n],a=e[r];hi.apply(n,a.args),n=a.func.apply(a.thisArg,n)}return n}function Ye(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Di>=i){for(;i>r;){var a=r+i>>>1,o=t[a];(n?e>=o:e>o)&&null!==o?r=a+1:i=a}return i}return Fe(t,e,jr,n)}function Fe(t,e,n,r){e=n(e);for(var i=0,a=t?t.length:0,o=e!==e,u=null===e,l=e===m;a>i;){var c=fi((i+a)/2),s=n(t[c]),f=s!==m,p=s===s;(o?p||r:u?p&&f&&(r||null!=s):l?p&&(r||f):null==s?0:r?e>=s:e>s)?i=c+1:a=c}return Mi(a,Ri)}function Be(t,e,n){if("function"!=typeof t)return jr;if(e===m)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)};case 5:return function(n,r,i,a,o){return t.call(e,n,r,i,a,o)}}return function(){return t.apply(e,arguments)}}function Ue(t){return li.call(t,0)}function Pe(t,e,n){for(var r=n.length,i=-1,a=$i(t.length-r,0),o=-1,u=e.length,l=Ur(a+u);++o<u;)l[o]=e[o];for(;++i<r;)l[n[i]]=t[i];for(;a--;)l[o++]=t[i++];return l}function We(t,e,n){for(var r=-1,i=n.length,a=-1,o=$i(t.length-i,0),u=-1,l=e.length,c=Ur(o+l);++a<o;)c[a]=t[a];for(o=a;++u<l;)c[o+u]=e[u];for(;++r<i;)c[o+n[r]]=t[a++];return c}function Ge(t,e){return function(n,r,i){var a=e?e():{};if(r=mn(r,i,3),Ra(n)){i=-1;for(var o=n.length;++i<o;){var u=n[i];t(a,u,r(u,i,n),n)}}else Ui(n,function(e,n,i){t(a,e,r(e,n,i),i)});return a}}function ze(t){return cr(function(e,n){var r=-1,i=null==e?0:n.length,a=i>2?n[i-2]:m,o=i>2?n[2]:m,u=i>1?n[i-1]:m;for("function"==typeof a?(a=Be(a,u,5),i-=2):(a="function"==typeof u?u:m,i-=a?1:0),o&&kn(n[0],n[1],o)&&(a=3>i?m:a,i=1);++r<i;)(o=n[r])&&t(e,o,a);return e})}function Ke(t,e){return function(n,r){var i=n?Hi(n):0;if(!Rn(i))return t(n,r);for(var a=e?i:-1,o=Fn(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ve(t){return function(e,n,r){var i=Fn(e);r=r(e);for(var a=r.length,o=t?a:-1;t?o--:++o<a;){var u=r[o];if(!1===n(i[u],u,i))break}return e}}function He(t,e){function n(){return(this&&this!==Kt&&this instanceof n?r:t).apply(e,arguments)}var r=Je(t);return n}function Ze(t){return function(e){var n=-1;e=Rr(Cr(e));for(var r=e.length,i="";++n<r;)i=t(i,e[n],n);return i}}function Je(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4])}var n=Bi(t.prototype),e=t.apply(n,e);return vr(e)?e:n}}function qe(t){function e(n,r,i){return i&&kn(n,r,i)&&(r=null),n=vn(n,t,null,null,null,null,null,r),n.placeholder=e.placeholder,n}return e}function Xe(t,e){return function(n,r,i){if(i&&kn(n,r,i)&&(r=null),r=mn(r,i,3),1==r.length){i=n=Yn(n);for(var a=r,o=-1,u=i.length,l=e,c=l;++o<u;){var s=i[o],f=+a(s);t(f,l)&&(l=f,c=s)}if(i=c,!n.length||i!==e)return i}return ce(n,r,t,e)}}function Qe(t,n){return function(r,i,a){return i=mn(i,a,3),Ra(r)?(i=e(r,i,n),i>-1?r[i]:m):fe(r,i,t)}}function tn(t){return function(n,r,i){return n&&n.length?(r=mn(r,i,3),e(n,r,t)):-1}}function en(t){return function(e,n,r){return n=mn(n,r,3),fe(e,n,t,!0)}}function nn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,a=Ur(n);t?r--:++r<n;){var o=a[i++]=arguments[r];if("function"!=typeof o)throw new Jr(E);!e&&Yt.prototype.thru&&"wrapper"==bn(o)&&(e=new Yt([]))}for(r=e?-1:n;++r<n;){var o=a[r],i=bn(o),u="wrapper"==i?Vi(o):null;e=u&&Nn(u[0])&&u[1]==(C|O|M|I)&&!u[4].length&&1==u[9]?e[bn(u[0])].apply(e,u[3]):1==o.length&&Nn(o)?e[i]():e.thru(o)}return function(){var t=arguments;if(e&&1==t.length&&Ra(t[0]))return e.plant(t[0]).value();for(var r=0,t=n?a[r].apply(this,t):t[0];++r<n;)t=a[r].call(this,t);return t}}}function rn(t,e){return function(n,r,i){return"function"==typeof r&&i===m&&Ra(n)?t(n,r):e(n,Be(r,i,3))}}function an(t){return function(e,n,r){return("function"!=typeof n||r!==m)&&(n=Be(n,r,3)),t(e,n,$r)}}function on(t){return function(e,n,r){return("function"!=typeof n||r!==m)&&(n=Be(n,r,3)),t(e,n)}}function un(t){return function(e,n,r){var i={};return n=mn(n,r,3),he(e,function(e,r,a){a=n(e,r,a),r=t?a:r,e=t?e:a,i[r]=e}),i}}function ln(t){return function(e,n,r){return e=i(e),(t?e:"")+pn(e,n,r)+(t?"":e)}}function cn(t){var e=cr(function(n,r){var i=h(r,e.placeholder);return vn(n,t,null,r,i)});return e}function sn(t,e){return function(n,r,i,a){var o=3>arguments.length;return"function"==typeof r&&a===m&&Ra(n)?t(n,r,i,o):Ce(n,mn(r,a,4),i,o,e)}}function fn(t,e,n,r,i,a,o,u,l,c){function s(){for(var b=arguments.length,A=b,O=Ur(b);A--;)O[A]=arguments[A];if(r&&(O=Pe(O,r,i)),a&&(O=We(O,a,o)),v||_){var A=s.placeholder,$=h(O,A),b=b-$.length;if(c>b){var C=u?Wt(u):null,b=$i(c-b,0),I=v?$:null,$=v?null:$,k=v?O:null,O=v?null:O;return e|=v?M:S,e&=~(v?S:M),g||(e&=~(w|x)),O=[t,e,n,k,I,O,$,C,l,b],C=fn.apply(m,O),Nn(t)&&Zi(C,O),C.placeholder=A,C}}if(A=p?n:this,C=d?A[t]:t,u)for(b=O.length,I=Mi(u.length,b),$=Wt(O);I--;)k=u[I],O[I]=In(k,b)?$[k]:m;return f&&l<O.length&&(O.length=l),this&&this!==Kt&&this instanceof s&&(C=y||Je(t)),C.apply(A,O)}var f=e&C,p=e&w,d=e&x,v=e&O,g=e&A,_=e&$,y=d?null:Je(t);return s}function pn(t,e,n){return t=t.length,e=+e,e>t&&Ai(e)?(e-=t,n=null==n?" ":n+"",Lr(n,ci(e/n.length)).slice(0,e)):""}function dn(t,e,n,r){function i(){for(var e=-1,u=arguments.length,l=-1,c=r.length,s=Ur(u+c);++l<c;)s[l]=r[l];for(;u--;)s[l++]=arguments[++e];return(this&&this!==Kt&&this instanceof i?o:t).apply(a?n:this,s)}var a=e&w,o=Je(t);return i}function hn(t){return function(e,n,r,i){var a=mn(r);return null==r&&a===ie?Ye(e,n,t):Fe(e,n,a(r,i,1),t)}}function vn(t,e,n,r,i,a,o,u){var l=e&x;if(!l&&"function"!=typeof t)throw new Jr(E);var c=r?r.length:0;if(c||(e&=~(M|S),r=i=null),c-=i?i.length:0,e&S){var s=r,f=i;r=i=null}var p=l?null:Vi(t);return n=[t,e,n,r,i,s,f,a,o,u],p&&(r=n[1],e=p[1],u=r|e,i=e==C&&r==O||e==C&&r==I&&n[7].length<=p[8]||e==(C|I)&&r==O,(C>u||i)&&(e&w&&(n[2]=p[2],u|=r&w?0:A),(r=p[3])&&(i=n[3],n[3]=i?Pe(i,r,p[4]):Wt(r),n[4]=i?h(n[3],Y):Wt(p[4])),(r=p[5])&&(i=n[5],n[5]=i?We(i,r,p[6]):Wt(r),n[6]=i?h(n[5],Y):Wt(p[6])),(r=p[7])&&(n[7]=Wt(r)),e&C&&(n[8]=null==n[8]?p[8]:Mi(n[8],p[8])),null==n[9]&&(n[9]=p[9]),n[0]=p[0],n[1]=u),e=n[1],u=n[9]),n[9]=null==u?l?0:t.length:$i(u-c,0)||0,(p?zi:Zi)(e==w?He(n[0],n[2]):e!=M&&e!=(w|M)||n[4].length?fn.apply(m,n):dn.apply(m,n),n)}function gn(t,e,n,r,i,a,o){var u=-1,l=t.length,c=e.length;if(l!=c&&(!i||l>=c))return!1;for(;++u<l;){var s=t[u],c=e[u],f=r?r(i?c:s,i?s:c,u):m;if(f!==m){if(f)continue;return!1}if(i){if(!qt(e,function(t){return s===t||n(s,t,r,i,a,o)}))return!1}else if(s!==c&&!n(s,c,r,i,a,o))return!1}return!0}function _n(t,e,n){switch(n){case U:case P:return+t==+e;case W:return t.name==e.name&&t.message==e.message;case z:return t!=+t?e!=+e:t==+e;case V:case H:return t==e+""}return!1}function yn(t,e,n,r,i,a,o){var u=za(t),l=u.length,c=za(e).length;if(l!=c&&!i)return!1;for(c=l;c--;){var s=u[c];if(!(i?s in e:ni.call(e,s)))return!1}for(var f=i;++c<l;){var s=u[c],p=t[s],d=e[s],h=r?r(i?d:p,i?p:d,s):m;if(h===m?!n(p,d,r,i,a,o):!h)return!1;f||(f="constructor"==s)}return f||(n=t.constructor,r=e.constructor,!(n!=r&&"constructor"in t&&"constructor"in e)||"function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)?!0:!1}function mn(t,e,n){var r=jt.callback||Dr,r=r===Dr?ie:r;return n?r(t,e,n):r}function bn(t){for(var e=t.name,n=Yi[e],r=n?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function wn(t,e,r){var i=jt.indexOf||zn,i=i===zn?n:i;return t?i(t,e,r):i}function xn(t){t=Mr(t);for(var e=t.length;e--;){var n=t[e][1];t[e][2]=n===n&&!vr(n)}return t}function An(t,e){var n=null==t?m:t[e];return gr(n)?n:m}function On(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ni.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function $n(t){return t=t.constructor,"function"==typeof t&&t instanceof t||(t=Vr),new t}function Mn(t,e,n){var r=t.constructor;switch(e){case Z:return Ue(t);case U:case P:return new r(+t);case J:case q:case X:case Q:case tt:case et:case nt:case rt:case it:return e=t.buffer,new r(n?Ue(e):e,t.byteOffset,t.length);case z:case H:return new r(t);case V:var i=new r(t.source,At.exec(t));i.lastIndex=t.lastIndex}return i}function Sn(t,e,n){return null==t||Ln(e,t)||(e=Bn(e),t=1==e.length?t:_e(t,Ie(e,0,-1)),e=Kn(e)),e=null==t?t:t[e],null==e?m:e.apply(t,n)}function Cn(t){return null!=t&&Rn(Hi(t))}function In(t,e){return t="number"==typeof t||Mt.test(t)?+t:-1,e=null==e?ji:e,t>-1&&0==t%1&&e>t}function kn(t,e,n){if(!vr(n))return!1;var r=typeof e;return("number"==r?Cn(n)&&In(e,n.length):"string"==r&&e in n)?(e=n[e],t===t?t===e:e!==e):!1}function Ln(t,e){var n=typeof t;return"string"==n&&gt.test(t)||"number"==n?!0:Ra(t)?!1:!vt.test(t)||null!=e&&t in Fn(e)}function Nn(t){var e=bn(t);return e in Ft.prototype?(e=jt[e],t===e?!0:(e=Vi(e),!!e&&t===e[0])):!1}function Rn(t){return"number"==typeof t&&t>-1&&0==t%1&&ji>=t}function Dn(t,e){t=Fn(t);for(var n=-1,r=e.length,i={};++n<r;){var a=e[n];a in t&&(i[a]=t[a])}return i}function Tn(t,e){var n={};return de(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function jn(t){var e;if(!p(t)||ii.call(t)!=K||!(ni.call(t,"constructor")||(e=t.constructor,"function"!=typeof e||e instanceof e)))return!1;var n;return de(t,function(t,e){n=e}),n===m||ni.call(t,n)}function En(t){for(var e=$r(t),n=e.length,r=n&&t.length,i=!!r&&Rn(r)&&(Ra(t)||fr(t)),a=-1,o=[];++a<n;){var u=e[a];(i&&In(u,r)||ni.call(t,u))&&o.push(u)}return o}function Yn(t){return null==t?[]:Cn(t)?vr(t)?t:Vr(t):Sr(t)}function Fn(t){return vr(t)?t:Vr(t)}function Bn(t){if(Ra(t))return t;var e=[];return i(t).replace(_t,function(t,n,r,i){e.push(r?i.replace(wt,"$1"):n||t)}),e}function Un(t){return t instanceof Ft?t.clone():new Yt(t.__wrapped__,t.__chain__,Wt(t.__actions__))}function Pn(t,e,n){return t&&t.length?((n?kn(t,e,n):null==e)&&(e=1),Ie(t,0>e?0:e)):[]}function Wn(t,e,n){var r=t?t.length:0;return r?((n?kn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ie(t,0,0>e?0:e)):[]}function Gn(t){return t?t[0]:m}function zn(t,e,r){var i=t?t.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?$i(i+r,0):r;else if(r)return r=Ye(t,e),t=t[r],(e===e?e===t:t!==t)?r:-1;return n(t,e,r||0)}function Kn(t){var e=t?t.length:0;return e?t[e-1]:m}function Vn(t){return Pn(t,1)}function Hn(t,e,r,i){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(i=r,r=kn(t,e,i)?null:e,e=!1);var a=mn();if((null!=r||a!==ie)&&(r=a(r,i,3)),e&&wn()==n){e=r;var o;r=-1,i=t.length;for(var a=-1,u=[];++r<i;){var l=t[r],c=e?e(l,r,t):l;r&&o===c||(o=c,u[++a]=l)}t=u}else t=De(t,r);return t}function Zn(t){if(!t||!t.length)return[];var e=-1,n=0;t=Ht(t,function(t){return Cn(t)?(n=$i(t.length,n),!0):void 0});for(var r=Ur(n);++e<n;)r[e]=Zt(t,Oe(e));return r}function Jn(t,e,n){return t&&t.length?(t=Zn(t),null==e?t:(e=Be(e,n,4),Zt(t,function(t){return Jt(t,e,m,!0)}))):[]}function qn(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ra(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function Xn(t){return t=jt(t),t.__chain__=!0,t}function Qn(t,e,n){return e.call(n,t)}function tr(t,e,n){var r=Ra(t)?zt:le;return n&&kn(t,e,n)&&(e=null),("function"!=typeof e||n!==m)&&(e=mn(e,n,3)),r(t,e)}function er(t,e,n){var r=Ra(t)?Ht:se;return e=mn(e,n,3),r(t,e)}function nr(t,e,n,r){var i=t?Hi(t):0;return Rn(i)||(t=Sr(t),i=t.length),i?(n="number"!=typeof n||r&&kn(e,n,r)?0:0>n?$i(i+n,0):n||0,"string"==typeof t||!Ra(t)&&mr(t)?i>n&&-1<t.indexOf(e,n):-1<wn(t,e,n)):!1}function rr(t,e,n){var r=Ra(t)?Zt:be;return e=mn(e,n,3),r(t,e)}function ir(t,e,n){if(n?kn(t,e,n):null==e){t=Yn(t);var r=t.length;return r>0?t[Se(0,r-1)]:m}n=-1,t=xr(t);var r=t.length,i=r-1;for(e=Mi(0>e?0:+e||0,r);++n<e;){var r=Se(n,i),a=t[r];t[r]=t[n],t[n]=a}return t.length=e,t}function ar(t,e,n){var r=Ra(t)?qt:ke;return n&&kn(t,e,n)&&(e=null),("function"!=typeof e||n!==m)&&(e=mn(e,n,3)),r(t,e)}function or(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Jr(E);var r=t;t=e,e=r}return function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}}function ur(t,e,n){function r(){var n=e-(ba()-c);0>=n||n>e?(u&&si(u),n=p,u=f=p=m,n&&(d=ba(),l=t.apply(s,o),f||u||(o=s=null))):f=gi(r,n)}function i(){f&&si(f),u=f=p=m,(v||h!==e)&&(d=ba(),l=t.apply(s,o),f||u||(o=s=null))}function a(){if(o=arguments,c=ba(),s=this,p=v&&(f||!g),!1===h)var n=g&&!f;else{u||g||(d=c);var a=h-(c-d),_=0>=a||a>h;_?(u&&(u=si(u)),d=c,l=t.apply(s,o)):u||(u=gi(i,a))}return _&&f?f=si(f):f||e===h||(f=gi(r,e)),n&&(_=!0,l=t.apply(s,o)),!_||f||u||(o=s=null),l}var o,u,l,c,s,f,p,d=0,h=!1,v=!0;if("function"!=typeof t)throw new Jr(E);if(e=0>e?0:+e||0,!0===n)var g=!0,v=!1;else vr(n)&&(g=n.leading,h="maxWait"in n&&$i(+n.maxWait||0,e),v="trailing"in n?n.trailing:v);return a.cancel=function(){f&&si(f),u&&si(u),u=f=p=m},a}function lr(t,e){function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;return a.has(i)?a.get(i):(r=t.apply(this,r),n.cache=a.set(i,r),r)}if("function"!=typeof t||e&&"function"!=typeof e)throw new Jr(E);return n.cache=new lr.Cache,n}function cr(t,e){if("function"!=typeof t)throw new Jr(E);return e=$i(e===m?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=$i(n.length-e,0),a=Ur(i);++r<i;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}for(i=Ur(e+1),r=-1;++r<e;)i[r]=n[r];return i[e]=a,t.apply(this,i)}}function sr(t,e){return t>e}function fr(t){return p(t)&&Cn(t)&&ii.call(t)==F}function pr(t){return!!t&&1===t.nodeType&&p(t)&&-1<ii.call(t).indexOf("Element")}function dr(t,e,n,r){return r=(n="function"==typeof n?Be(n,r,3):m)?n(t,e):m,r===m?ye(t,e,n):!!r}function hr(t){return p(t)&&"string"==typeof t.message&&ii.call(t)==W}function vr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function gr(t){return null==t?!1:ii.call(t)==G?oi.test(ei.call(t)):p(t)&&$t.test(t)}function _r(t){return"number"==typeof t||p(t)&&ii.call(t)==z}function yr(t){return p(t)&&ii.call(t)==V}function mr(t){return"string"==typeof t||p(t)&&ii.call(t)==H}function br(t){return p(t)&&Rn(t.length)&&!!Rt[ii.call(t)]}function wr(t,e){return e>t}function xr(t){var e=t?Hi(t):0;return Rn(e)?e?Wt(t):[]:Sr(t)}function Ar(t){return re(t,$r(t))}function Or(t){return ge(t,$r(t))}function $r(t){if(null==t)return[];vr(t)||(t=Vr(t));for(var e=t.length,e=e&&Rn(e)&&(Ra(t)||fr(t))&&e||0,n=t.constructor,r=-1,n="function"==typeof n&&n.prototype===t,i=Ur(e),a=e>0;++r<e;)i[r]=r+"";for(var o in t)a&&In(o,e)||"constructor"==o&&(n||!ni.call(t,o))||i.push(o);return i}function Mr(t){t=Fn(t);for(var e=-1,n=za(t),r=n.length,i=Ur(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function Sr(t){return Te(t,za(t))}function Cr(t){return(t=i(t))&&t.replace(St,l).replace(bt,"")}function Ir(t){return(t=i(t))&&mt.test(t)?t.replace(yt,"\\$&"):t}function kr(t,e,n){return n&&kn(t,e,n)&&(e=0),Ii(t,e)}function Lr(t,e){var n="";if(t=i(t),e=+e,1>e||!t||!Ai(e))return n;do e%2&&(n+=t),e=fi(e/2),t+=t;while(e);return n}function Nr(t,e,n){var r=t;return(t=i(t))?(n?kn(r,e,n):null==e)?t.slice(v(t),g(t)+1):(e+="",t.slice(a(t,e),o(t,e)+1)):t}function Rr(t,e,n){return n&&kn(t,e,n)&&(e=null),t=i(t),t.match(e||kt)||[]}function Dr(t,e,n){return n&&kn(t,e,n)&&(e=null),p(t)?Er(t):ie(t,e)}function Tr(t){return function(){return t}}function jr(t){return t}function Er(t){return we(ae(t,!0))}function Yr(t,e,n){if(null==n){var r=vr(e),i=r?za(e):null;((i=i&&i.length?ge(e,i):null)?i.length:r)||(i=!1,n=e,e=t,t=this)}i||(i=ge(e,za(e)));var a=!0,r=-1,o=Ta(t),u=i.length;!1===n?a=!1:vr(n)&&"chain"in n&&(a=n.chain);for(;++r<u;){n=i[r];var l=e[n];t[n]=l,o&&(t.prototype[n]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__);return(r.__actions__=Wt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return n=[this.value()],hi.apply(n,arguments),e.apply(t,n)}}(l))}return t}function Fr(){}function Br(t){return Ln(t)?Oe(t):$e(t)}d=d?Vt.defaults(Kt.Object(),d,Vt.pick(Kt,Nt)):Kt;var Ur=d.Array,Pr=d.Date,Wr=d.Error,Gr=d.Function,zr=d.Math,Kr=d.Number,Vr=d.Object,Hr=d.RegExp,Zr=d.String,Jr=d.TypeError,qr=Ur.prototype,Xr=Vr.prototype,Qr=Zr.prototype,ti=(ti=d.window)?ti.document:null,ei=Gr.prototype.toString,ni=Xr.hasOwnProperty,ri=0,ii=Xr.toString,ai=d._,oi=Hr("^"+Ir(ei.call(ni)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ui=An(d,"ArrayBuffer"),li=An(ui&&new ui(0),"slice"),ci=zr.ceil,si=d.clearTimeout,fi=zr.floor,pi=An(Vr,"getPrototypeOf"),di=d.parseFloat,hi=qr.push,vi=An(d,"Set"),gi=d.setTimeout,_i=qr.splice,yi=An(d,"Uint8Array"),mi=An(d,"WeakMap"),bi=function(){try{var t=An(d,"Float64Array"),e=new t(new ui(10),0,1)&&t}catch(n){}return e||null}(),wi=An(Vr,"create"),xi=An(Ur,"isArray"),Ai=d.isFinite,Oi=An(Vr,"keys"),$i=zr.max,Mi=zr.min,Si=An(Pr,"now"),Ci=An(Kr,"isFinite"),Ii=d.parseInt,ki=zr.random,Li=Kr.NEGATIVE_INFINITY,Ni=Kr.POSITIVE_INFINITY,Ri=4294967294,Di=2147483647,Ti=bi?bi.BYTES_PER_ELEMENT:0,ji=9007199254740991,Ei=mi&&new mi,Yi={},Fi=jt.support={};!function(t){function e(){this.x=t}var n=[];e.prototype={valueOf:t,y:t};for(var r in new e)n.push(r);try{Fi.dom=11===ti.createDocumentFragment().nodeType}catch(i){Fi.dom=!1}}(1,0),jt.templateSettings={escape:pt,evaluate:dt,interpolate:ht,variable:"",imports:{_:jt}};var Bi=function(){function t(){}return function(e){if(vr(e)){t.prototype=e;var n=new t;t.prototype=null}return n||{}}}(),Ui=Ke(he),Pi=Ke(ve,!0),Wi=Ve(),Gi=Ve(!0),zi=Ei?function(t,e){return Ei.set(t,e),t}:jr;li||(Ue=ui&&yi?function(t){var e=t.byteLength,n=bi?fi(e/Ti):0,r=n*Ti,i=new ui(e);if(n){var a=new bi(i,0,n);a.set(new bi(t,0,n))}return e!=r&&(a=new yi(i,r),a.set(new yi(t,r))),i}:Tr(null));var Ki=wi&&vi?function(t){return new Ut(t)}:Tr(null),Vi=Ei?function(t){return Ei.get(t)}:Fr,Hi=Oe("length"),Zi=function(){var t=0,e=0;return function(n,r){var i=ba(),a=R-(i-e);if(e=i,a>0){if(++t>=N)return n}else t=0;return zi(n,r)}}(),Ji=cr(function(t,e){return Cn(t)?ue(t,pe(e,!1,!0)):[]}),qi=tn(),Xi=tn(!0),Qi=cr(function(t){for(var e=t.length,r=e,i=Ur(s),a=wn(),o=a==n,u=[];r--;){var l=t[r]=Cn(l=t[r])?l:[];i[r]=o&&120<=l.length?Ki(r&&l):null}var o=t[0],c=-1,s=o?o.length:0,f=i[0];t:for(;++c<s;)if(l=o[c],0>(f?Pt(f,l):a(u,l,0))){for(r=e;--r;){var p=i[r];if(0>(p?Pt(p,l):a(t[r],l,0)))continue t}f&&f.push(l),u.push(l)}return u}),ta=cr(function(e,n){n=pe(n);var r=ne(e,n);return Me(e,n.sort(t)),r}),ea=hn(),na=hn(!0),ra=cr(function(t){return De(pe(t,!1,!0))}),ia=cr(function(t,e){return Cn(t)?ue(t,e):[]}),aa=cr(Zn),oa=cr(function(t){var e=t.length,n=e>2?t[e-2]:m,r=e>1?t[e-1]:m;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):m,r=m),t.length=e,Jn(t,n,r)}),ua=cr(function(t,e){return ne(t,pe(e))}),la=Ge(function(t,e,n){ni.call(t,n)?++t[n]:t[n]=1}),ca=Qe(Ui),sa=Qe(Pi,!0),fa=rn(Gt,Ui),pa=rn(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},Pi),da=Ge(function(t,e,n){ni.call(t,n)?t[n].push(e):t[n]=[e]}),ha=Ge(function(t,e,n){t[n]=e}),va=cr(function(t,e,n){var r=-1,i="function"==typeof e,a=Ln(e),o=Cn(t)?Ur(t.length):[];return Ui(t,function(t){var u=i?e:a&&null!=t?t[e]:null;o[++r]=u?u.apply(t,n):Sn(t,e,n)}),o}),ga=Ge(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),_a=sn(Jt,Ui),ya=sn(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},Pi),ma=cr(function(t,e){if(null==t)return[];var n=e[2];return n&&kn(e[0],e[1],n)&&(e.length=1),Ne(t,pe(e),[])}),ba=Si||function(){return(new Pr).getTime()},wa=cr(function(t,e,n){var r=w;if(n.length)var i=h(n,wa.placeholder),r=r|M;return vn(t,r,e,n,i)}),xa=cr(function(t,e){e=e.length?pe(e):Or(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=vn(t[i],w,t)}return t}),Aa=cr(function(t,e,n){var r=w|x;if(n.length)var i=h(n,Aa.placeholder),r=r|M;return vn(e,r,t,n,i)}),Oa=qe(O),$a=qe($),Ma=cr(function(t,e){return oe(t,1,e)}),Sa=cr(function(t,e,n){return oe(t,e,n)}),Ca=nn(),Ia=nn(!0),ka=cn(M),La=cn(S),Na=cr(function(t,e){return vn(t,I,null,null,null,pe(e))}),Ra=xi||function(t){return p(t)&&Rn(t.length)&&ii.call(t)==B};Fi.dom||(pr=function(t){return!!t&&1===t.nodeType&&p(t)&&!ja(t)});var Da=Ci||function(t){return"number"==typeof t&&Ai(t)},Ta=r(/x/)||yi&&!r(yi)?function(t){return ii.call(t)==G}:r,ja=pi?function(t){if(!t||ii.call(t)!=K)return!1;var e=An(t,"valueOf"),n=e&&(n=pi(e))&&pi(n);return n?t==n||pi(t)==n:jn(t)}:jn,Ea=ze(function(t,e,n){return n?te(t,e,n):ee(t,e)}),Ya=cr(function(t){var e=t[0];return null==e?e:(t.push(Xt),Ea.apply(m,t))}),Fa=en(he),Ba=en(ve),Ua=an(Wi),Pa=an(Gi),Wa=on(he),Ga=on(ve),za=Oi?function(t){var e=null==t?null:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Cn(t)?En(t):vr(t)?Oi(t):[]}:En,Ka=un(!0),Va=un(),Ha=ze(Ae),Za=cr(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=Zt(pe(e),Zr),Dn(t,ue($r(t),e));var n=Be(e[0],e[1],3);return Tn(t,function(t,e,r){return!n(t,e,r)})}),Ja=cr(function(t,e){return null==t?{}:"function"==typeof e[0]?Tn(t,Be(e[0],e[1],3)):Dn(t,pe(e))}),qa=Ze(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Xa=Ze(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Qa=ln(),to=ln(!0);8!=Ii(Lt+"08")&&(kr=function(t,e,n){return(n?kn(t,e,n):null==e)?e=0:e&&(e=+e),t=Nr(t),Ii(t,e||(Ot.test(t)?16:10))});var eo=Ze(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),no=Ze(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),ro=cr(function(t,e){try{return t.apply(m,e)}catch(n){return hr(n)?n:new Wr(n)}}),io=cr(function(t,e){return function(n){return Sn(n,t,e)}}),ao=cr(function(t,e){return function(n){return Sn(t,n,e)}}),oo=Xe(sr,Li),uo=Xe(wr,Ni);return jt.prototype=Et.prototype,Yt.prototype=Bi(Et.prototype),Yt.prototype.constructor=Yt,Ft.prototype=Bi(Et.prototype),Ft.prototype.constructor=Ft,Bt.prototype["delete"]=function(t){return this.has(t)&&delete this.__data__[t]},Bt.prototype.get=function(t){return"__proto__"==t?m:this.__data__[t]},Bt.prototype.has=function(t){return"__proto__"!=t&&ni.call(this.__data__,t)},Bt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},Ut.prototype.push=function(t){var e=this.data;"string"==typeof t||vr(t)?e.set.add(t):e.hash[t]=!0},lr.Cache=Bt,jt.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Jr(E);var n=t;t=e,e=n}return t=Ai(t=+t)?t:0,function(){return 1>--t?e.apply(this,arguments):void 0}},jt.ary=function(t,e,n){return n&&kn(t,e,n)&&(e=null),e=t&&null==e?t.length:$i(+e||0,0),vn(t,C,null,null,null,null,e)},jt.assign=Ea,jt.at=ua,jt.before=or,jt.bind=wa,jt.bindAll=xa,jt.bindKey=Aa,jt.callback=Dr,jt.chain=Xn,jt.chunk=function(t,e,n){e=(n?kn(t,e,n):null==e)?1:$i(+e||1,1),n=0;for(var r=t?t.length:0,i=-1,a=Ur(ci(r/e));r>n;)a[++i]=Ie(t,n,n+=e);return a},jt.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var a=t[e];a&&(i[++r]=a)}return i},jt.constant=Tr,jt.countBy=la,jt.create=function(t,e,n){var r=Bi(t);return n&&kn(t,e,n)&&(e=null),e?ee(r,e):r},jt.curry=Oa,jt.curryRight=$a,jt.debounce=ur,jt.defaults=Ya,jt.defer=Ma,jt.delay=Sa,jt.difference=Ji,jt.drop=Pn,jt.dropRight=Wn,jt.dropRightWhile=function(t,e,n){return t&&t.length?je(t,mn(e,n,3),!0,!0):[]},jt.dropWhile=function(t,e,n){return t&&t.length?je(t,mn(e,n,3),!0):[]},jt.fill=function(t,e,n,r){var i=t?t.length:0;if(!i)return[];for(n&&"number"!=typeof n&&kn(t,e,n)&&(n=0,r=i),i=t.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===m||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t},jt.filter=er,jt.flatten=function(t,e,n){var r=t?t.length:0;return n&&kn(t,e,n)&&(e=!1),r?pe(t,e):[]},jt.flattenDeep=function(t){return t&&t.length?pe(t,!0):[]},jt.flow=Ca,jt.flowRight=Ia,jt.forEach=fa,jt.forEachRight=pa,jt.forIn=Ua,jt.forInRight=Pa,
jt.forOwn=Wa,jt.forOwnRight=Ga,jt.functions=Or,jt.groupBy=da,jt.indexBy=ha,jt.initial=function(t){return Wn(t,1)},jt.intersection=Qi,jt.invert=function(t,e,n){n&&kn(t,e,n)&&(e=null),n=-1;for(var r=za(t),i=r.length,a={};++n<i;){var o=r[n],u=t[o];e?ni.call(a,u)?a[u].push(o):a[u]=[o]:a[u]=o}return a},jt.invoke=va,jt.keys=za,jt.keysIn=$r,jt.map=rr,jt.mapKeys=Ka,jt.mapValues=Va,jt.matches=Er,jt.matchesProperty=function(t,e){return xe(t,ae(e,!0))},jt.memoize=lr,jt.merge=Ha,jt.method=io,jt.methodOf=ao,jt.mixin=Yr,jt.negate=function(t){if("function"!=typeof t)throw new Jr(E);return function(){return!t.apply(this,arguments)}},jt.omit=Za,jt.once=function(t){return or(2,t)},jt.pairs=Mr,jt.partial=ka,jt.partialRight=La,jt.partition=ga,jt.pick=Ja,jt.pluck=function(t,e){return rr(t,Br(e))},jt.property=Br,jt.propertyOf=function(t){return function(e){return _e(t,Bn(e),e+"")}},jt.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=wn(),i=t.length;++n<i;)for(var a=0,o=t[n];-1<(a=r(e,o,a));)_i.call(e,a,1);return e},jt.pullAt=ta,jt.range=function(t,e,n){n&&kn(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;var r=-1;e=$i(ci((e-t)/(n||1)),0);for(var i=Ur(e);++r<e;)i[r]=t,t+=n;return i},jt.rearg=Na,jt.reject=function(t,e,n){var r=Ra(t)?Ht:se;return e=mn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})},jt.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,a=[],o=t.length;for(e=mn(e,n,3);++i<o;)n=t[i],e(n,i,t)&&(r.push(n),a.push(i));return Me(t,a),r},jt.rest=Vn,jt.restParam=cr,jt.set=function(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||Ln(e,t)?[r]:Bn(e);for(var r=-1,i=e.length,a=i-1,o=t;null!=o&&++r<i;){var u=e[r];vr(o)&&(r==a?o[u]=n:null==o[u]&&(o[u]=In(e[r+1])?[]:{})),o=o[u]}return t},jt.shuffle=function(t){return ir(t,Ni)},jt.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&kn(t,e,n)&&(e=0,n=r),Ie(t,e,n)):[]},jt.sortBy=function(t,e,n){if(null==t)return[];n&&kn(t,e,n)&&(e=null);var r=-1;return e=mn(e,n,3),t=be(t,function(t,n,i){return{a:e(t,n,i),b:++r,c:t}}),Le(t,u)},jt.sortByAll=ma,jt.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&kn(e,n,r)&&(n=null),Ra(e)||(e=null==e?[]:[e]),Ra(n)||(n=null==n?[]:[n]),Ne(t,e,n))},jt.spread=function(t){if("function"!=typeof t)throw new Jr(E);return function(e){return t.apply(this,e)}},jt.take=function(t,e,n){return t&&t.length?((n?kn(t,e,n):null==e)&&(e=1),Ie(t,0,0>e?0:e)):[]},jt.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?kn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ie(t,0>e?0:e)):[]},jt.takeRightWhile=function(t,e,n){return t&&t.length?je(t,mn(e,n,3),!1,!0):[]},jt.takeWhile=function(t,e,n){return t&&t.length?je(t,mn(e,n,3)):[]},jt.tap=function(t,e,n){return e.call(n,t),t},jt.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Jr(E);return!1===n?r=!1:vr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Tt.leading=r,Tt.maxWait=+e,Tt.trailing=i,ur(t,e,Tt)},jt.thru=Qn,jt.times=function(t,e,n){if(t=fi(t),1>t||!Ai(t))return[];var r=-1,i=Ur(Mi(t,4294967295));for(e=Be(e,n,1);++r<t;)4294967295>r?i[r]=e(r):e(r);return i},jt.toArray=xr,jt.toPlainObject=Ar,jt.transform=function(t,e,n,r){var i=Ra(t)||br(t);return e=mn(e,r,4),null==n&&(i||vr(t)?(r=t.constructor,n=i?Ra(t)?new r:[]:Bi(Ta(r)?r.prototype:null)):n={}),(i?Gt:he)(t,function(t,r,i){return e(n,t,r,i)}),n},jt.union=ra,jt.uniq=Hn,jt.unzip=Zn,jt.unzipWith=Jn,jt.values=Sr,jt.valuesIn=function(t){return Te(t,$r(t))},jt.where=function(t,e){return er(t,we(e))},jt.without=ia,jt.wrap=function(t,e){return e=null==e?jr:e,vn(e,M,null,[t],[])},jt.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Cn(n))var r=r?ue(r,n).concat(ue(n,r)):n}return r?De(r):[]},jt.zip=aa,jt.zipObject=qn,jt.zipWith=oa,jt.backflow=Ia,jt.collect=rr,jt.compose=Ia,jt.each=fa,jt.eachRight=pa,jt.extend=Ea,jt.iteratee=Dr,jt.methods=Or,jt.object=qn,jt.select=er,jt.tail=Vn,jt.unique=Hn,Yr(jt,jt),jt.add=function(t,e){return(+t||0)+(+e||0)},jt.attempt=ro,jt.camelCase=qa,jt.capitalize=function(t){return(t=i(t))&&t.charAt(0).toUpperCase()+t.slice(1)},jt.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&kn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?ae(t,e,Be(n,r,1)):ae(t,e)},jt.cloneDeep=function(t,e,n){return"function"==typeof e?ae(t,!0,Be(e,n,1)):ae(t,!0)},jt.deburr=Cr,jt.endsWith=function(t,e,n){t=i(t),e+="";var r=t.length;return n=n===m?r:Mi(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n},jt.escape=function(t){return(t=i(t))&&ft.test(t)?t.replace(ct,c):t},jt.escapeRegExp=Ir,jt.every=tr,jt.find=ca,jt.findIndex=qi,jt.findKey=Fa,jt.findLast=sa,jt.findLastIndex=Xi,jt.findLastKey=Ba,jt.findWhere=function(t,e){return ca(t,we(e))},jt.first=Gn,jt.get=function(t,e,n){return t=null==t?m:_e(t,Bn(e),e+""),t===m?n:t},jt.gt=sr,jt.gte=function(t,e){return t>=e},jt.has=function(t,e){if(null==t)return!1;var n=ni.call(t,e);if(!n&&!Ln(e)){if(e=Bn(e),t=1==e.length?t:_e(t,Ie(e,0,-1)),null==t)return!1;e=Kn(e),n=ni.call(t,e)}return n||Rn(t.length)&&In(e,t.length)&&(Ra(t)||fr(t))},jt.identity=jr,jt.includes=nr,jt.indexOf=zn,jt.inRange=function(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=Mi(e,n)&&t<$i(e,n)},jt.isArguments=fr,jt.isArray=Ra,jt.isBoolean=function(t){return!0===t||!1===t||p(t)&&ii.call(t)==U},jt.isDate=function(t){return p(t)&&ii.call(t)==P},jt.isElement=pr,jt.isEmpty=function(t){return null==t?!0:Cn(t)&&(Ra(t)||mr(t)||fr(t)||p(t)&&Ta(t.splice))?!t.length:!za(t).length},jt.isEqual=dr,jt.isError=hr,jt.isFinite=Da,jt.isFunction=Ta,jt.isMatch=function(t,e,n,r){return n="function"==typeof n?Be(n,r,3):m,me(t,xn(e),n)},jt.isNaN=function(t){return _r(t)&&t!=+t},jt.isNative=gr,jt.isNull=function(t){return null===t},jt.isNumber=_r,jt.isObject=vr,jt.isPlainObject=ja,jt.isRegExp=yr,jt.isString=mr,jt.isTypedArray=br,jt.isUndefined=function(t){return t===m},jt.kebabCase=Xa,jt.last=Kn,jt.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?$i(r+n,0):Mi(n||0,r-1))+1;else if(n)return i=Ye(t,e,!0)-1,t=t[i],(e===e?e===t:t!==t)?i:-1;if(e!==e)return f(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},jt.lt=wr,jt.lte=function(t,e){return e>=t},jt.max=oo,jt.min=uo,jt.noConflict=function(){return d._=ai,this},jt.noop=Fr,jt.now=ba,jt.pad=function(t,e,n){t=i(t),e=+e;var r=t.length;return e>r&&Ai(e)?(r=(e-r)/2,e=fi(r),r=ci(r),n=pn("",r,n),n.slice(0,e)+t+n):t},jt.padLeft=Qa,jt.padRight=to,jt.parseInt=kr,jt.random=function(t,e,n){n&&kn(t,e,n)&&(e=n=null);var r=null==t,i=null==e;return null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1?(n=ki(),Mi(t+n*(e-t+di("1e-"+((n+"").length-1))),e)):Se(t,e)},jt.reduce=_a,jt.reduceRight=ya,jt.repeat=Lr,jt.result=function(t,e,n){var r=null==t?m:t[e];return r===m&&(null==t||Ln(e,t)||(e=Bn(e),t=1==e.length?t:_e(t,Ie(e,0,-1)),r=null==t?m:t[Kn(e)]),r=r===m?n:r),Ta(r)?r.call(t):r},jt.runInContext=y,jt.size=function(t){var e=t?Hi(t):0;return Rn(e)?e:za(t).length},jt.snakeCase=eo,jt.some=ar,jt.sortedIndex=ea,jt.sortedLastIndex=na,jt.startCase=no,jt.startsWith=function(t,e,n){return t=i(t),n=null==n?0:Mi(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n},jt.sum=function(t,e,n){n&&kn(t,e,n)&&(e=null);var r=mn(),i=null==e;if(i&&r===ie||(i=!1,e=r(e,n,3)),i){for(t=Ra(t)?t:Yn(t),e=t.length,n=0;e--;)n+=+t[e]||0;t=n}else t=Re(t,e);return t},jt.template=function(t,e,n){var r=jt.templateSettings;n&&kn(t,e,n)&&(e=n=null),t=i(t),e=te(ee({},n||e),r,Qt),n=te(ee({},e.imports),r.imports,Qt);var a,o,u=za(n),l=Te(n,u),c=0;n=e.interpolate||Ct;var f="__p+='";n=Hr((e.escape||Ct).source+"|"+n.source+"|"+(n===ht?xt:Ct).source+"|"+(e.evaluate||Ct).source+"|$","g");var p="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(n,function(e,n,r,i,u,l){return r||(r=i),f+=t.slice(c,l).replace(It,s),n&&(a=!0,f+="'+__e("+n+")+'"),u&&(o=!0,f+="';"+u+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),c=l+e.length,e}),f+="';",(e=e.variable)||(f="with(obj){"+f+"}"),f=(o?f.replace(at,""):f).replace(ot,"$1").replace(ut,"$1;"),f="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(a?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}",e=ro(function(){return Gr(u,p+"return "+f).apply(m,l)}),e.source=f,hr(e))throw e;return e},jt.trim=Nr,jt.trimLeft=function(t,e,n){var r=t;return(t=i(t))?t.slice((n?kn(r,e,n):null==e)?v(t):a(t,e+"")):t},jt.trimRight=function(t,e,n){var r=t;return(t=i(t))?(n?kn(r,e,n):null==e)?t.slice(0,g(t)+1):t.slice(0,o(t,e+"")+1):t},jt.trunc=function(t,e,n){n&&kn(t,e,n)&&(e=null);var r=k;if(n=L,null!=e)if(vr(e)){var a="separator"in e?e.separator:a,r="length"in e?+e.length||0:r;n="omission"in e?i(e.omission):n}else r=+e||0;if(t=i(t),r>=t.length)return t;if(r-=n.length,1>r)return n;if(e=t.slice(0,r),null==a)return e+n;if(yr(a)){if(t.slice(r).search(a)){var o,u=t.slice(0,r);for(a.global||(a=Hr(a.source,(At.exec(a)||"")+"g")),a.lastIndex=0;t=a.exec(u);)o=t.index;e=e.slice(0,null==o?r:o)}}else t.indexOf(a,r)!=r&&(a=e.lastIndexOf(a),a>-1&&(e=e.slice(0,a)));return e+n},jt.unescape=function(t){return(t=i(t))&&st.test(t)?t.replace(lt,_):t},jt.uniqueId=function(t){var e=++ri;return i(t)+e},jt.words=Rr,jt.all=tr,jt.any=ar,jt.contains=nr,jt.eq=dr,jt.detect=ca,jt.foldl=_a,jt.foldr=ya,jt.head=Gn,jt.include=nr,jt.inject=_a,Yr(jt,function(){var t={};return he(jt,function(e,n){jt.prototype[n]||(t[n]=e)}),t}(),!1),jt.sample=ir,jt.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ir(e,t)}):ir(this.value())},jt.VERSION=b,Gt("bind bindKey curry curryRight partial partialRight".split(" "),function(t){jt[t].placeholder=jt}),Gt(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=j,r=e==D;Ft.prototype[t]=function(t,i){var a=this.__filtered__,o=a&&r?new Ft(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:mn(t,i,1),limit:-1,type:e}),o.__filtered__=a||n,o}}),Gt(["drop","take"],function(t,e){var n=t+"While";Ft.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();return n=null==n?1:$i(fi(n)||0,0),r?e?i.__takeCount__=Mi(i.__takeCount__,n):Kn(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:t+(0>i.__dir__?"Right":"")}),i},Ft.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},Ft.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),Gt(["first","last"],function(t,e){var n="take"+(e?"Right":"");Ft.prototype[t]=function(){return this[n](1).value()[0]}}),Gt(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Ft.prototype[t]=function(){return this[n](1)}}),Gt(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?we:Br;Ft.prototype[t]=function(t){return this[n](r(t))}}),Ft.prototype.compact=function(){return this.filter(jr)},Ft.prototype.reject=function(t,e){return t=mn(t,e,1),this.filter(function(e){return!t(e)})},Ft.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return 0>t?n=this.takeRight(-t):t&&(n=this.drop(t)),e!==m&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},Ft.prototype.toArray=function(){return this.drop(0)},he(Ft.prototype,function(t,e){var n=jt[e];if(n){var r=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e);jt.prototype[e]=function(){function e(t){return t=[t],hi.apply(t,a),n.apply(jt,t)}var a=arguments,o=this.__chain__,u=this.__wrapped__,l=!!this.__actions__.length,c=u instanceof Ft,s=a[0],f=c||Ra(u);return f&&r&&"function"==typeof s&&1!=s.length&&(c=f=!1),c=c&&!l,i&&!o?c?t.call(u):n.call(jt,this.value()):f?(u=t.apply(c?u:new Ft(this),a),i||!l&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Qn,args:[e],thisArg:jt}),new Yt(u,o)):this.thru(e)}}}),Gt("concat join pop push replace shift sort splice split unshift".split(" "),function(t){var e=(/^(?:replace|split)$/.test(t)?Qr:qr)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);jt.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),he(Ft.prototype,function(t,e){var n=jt[e];if(n){var r=n.name;(Yi[r]||(Yi[r]=[])).push({name:e,func:n})}}),Yi[fn(null,x).name]=[{name:"wrapper",func:null}],Ft.prototype.clone=function(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new Ft(this.__wrapped__);return r.__actions__=t?Wt(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?Wt(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?Wt(n):null,r},Ft.prototype.reverse=function(){if(this.__filtered__){var t=new Ft(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Ft.prototype.value=function(){var t=this.__wrapped__.value();if(!Ra(t))return Ee(t,this.__actions__);var e,n=this.__dir__,r=0>n;e=t.length;for(var i=this.__views__,a=0,o=-1,u=i?i.length:0;++o<u;){var l=i[o],c=l.size;switch(l.type){case"drop":a+=c;break;case"dropRight":e-=c;break;case"take":e=Mi(e,a+c);break;case"takeRight":a=$i(a,e-c)}}e={start:a,end:e},i=e.start,a=e.end,e=a-i,i=r?a:i-1,a=Mi(e,this.__takeCount__),u=(o=this.__iteratees__)?o.length:0,l=0,c=[];t:for(;e--&&a>l;){for(var i=i+n,s=-1,f=t[i];++s<u;){var p=o[s],d=p.iteratee,h=p.type;if(h==D){if(p.done&&(r?i>p.index:i<p.index)&&(p.count=0,p.done=!1),p.index=i,!(p.done||(h=p.limit,p.done=h>-1?p.count++>=h:!d(f))))continue t}else if(p=d(f),h==j)f=p;else if(!p){if(h==T)continue t;break t}}c[l++]=f}return c},jt.prototype.chain=function(){return Xn(this)},jt.prototype.commit=function(){return new Yt(this.value(),this.__chain__)},jt.prototype.plant=function(t){for(var e,n=this;n instanceof Et;){var r=Un(n);e?i.__wrapped__=r:e=r;var i=r,n=n.__wrapped__}return i.__wrapped__=t,e},jt.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Ft?(this.__actions__.length&&(t=new Ft(this)),new Yt(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})},jt.prototype.toString=function(){return this.value()+""},jt.prototype.run=jt.prototype.toJSON=jt.prototype.valueOf=jt.prototype.value=function(){return Ee(this.__wrapped__,this.__actions__)},jt.prototype.collect=jt.prototype.map,jt.prototype.head=jt.prototype.first,jt.prototype.select=jt.prototype.filter,jt.prototype.tail=jt.prototype.rest,jt}var m,b="3.9.3",w=1,x=2,A=4,O=8,$=16,M=32,S=64,C=128,I=256,k=30,L="...",N=150,R=16,D=0,T=1,j=2,E="Expected a function",Y="__lodash_placeholder__",F="[object Arguments]",B="[object Array]",U="[object Boolean]",P="[object Date]",W="[object Error]",G="[object Function]",z="[object Number]",K="[object Object]",V="[object RegExp]",H="[object String]",Z="[object ArrayBuffer]",J="[object Float32Array]",q="[object Float64Array]",X="[object Int8Array]",Q="[object Int16Array]",tt="[object Int32Array]",et="[object Uint8Array]",nt="[object Uint8ClampedArray]",rt="[object Uint16Array]",it="[object Uint32Array]",at=/\b__p\+='';/g,ot=/\b(__p\+=)''\+/g,ut=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/&(?:amp|lt|gt|quot|#39|#96);/g,ct=/[&<>"'`]/g,st=RegExp(lt.source),ft=RegExp(ct.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,ht=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,gt=/^\w*$/,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,yt=/[.*+?^${}()|[\]\/\\]/g,mt=RegExp(yt.source),bt=/[\u0300-\u036f\ufe20-\ufe23]/g,wt=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Ot=/^0[xX]/,$t=/^\[object .+?Constructor\]$/,Mt=/^\d+$/,St=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ct=/($^)/,It=/['\n\r\u2028\u2029\\]/g,kt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Lt=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Nt="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Rt={};Rt[J]=Rt[q]=Rt[X]=Rt[Q]=Rt[tt]=Rt[et]=Rt[nt]=Rt[rt]=Rt[it]=!0,Rt[F]=Rt[B]=Rt[Z]=Rt[U]=Rt[P]=Rt[W]=Rt[G]=Rt["[object Map]"]=Rt[z]=Rt[K]=Rt[V]=Rt["[object Set]"]=Rt[H]=Rt["[object WeakMap]"]=!1;var Dt={};Dt[F]=Dt[B]=Dt[Z]=Dt[U]=Dt[P]=Dt[J]=Dt[q]=Dt[X]=Dt[Q]=Dt[tt]=Dt[z]=Dt[K]=Dt[V]=Dt[H]=Dt[et]=Dt[nt]=Dt[rt]=Dt[it]=!0,Dt[W]=Dt[G]=Dt["[object Map]"]=Dt["[object Set]"]=Dt["[object WeakMap]"]=!1;var Tt={leading:!1,maxWait:0,trailing:!1},jt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Yt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ft={"function":!0,object:!0},Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ut=Ft[typeof exports]&&exports&&!exports.nodeType&&exports,Pt=Ft[typeof module]&&module&&!module.nodeType&&module,Wt=Ft[typeof self]&&self&&self.Object&&self,Gt=Ft[typeof window]&&window&&window.Object&&window,zt=Pt&&Pt.exports===Ut&&Ut,Kt=Ut&&Pt&&"object"==typeof global&&global&&global.Object&&global||Gt!==(this&&this.window)&&Gt||Wt||this,Vt=y();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Kt._=Vt,define(function(){return Vt})):Ut&&Pt?zt?(Pt.exports=Vt)._=Vt:Ut._=Vt:Kt._=Vt}).call(this);var Recalls=function(t){this.base_url=t.url||"https://api.fda.gov/",this.api_key=t.api_key||"J9fMuXQVgb0ftI7BPSEDGMT49c9yXdHxKPWRxaVN",this.api="food/enforcement.json"};Recalls.prototype.count=function(t,e){var n=t.api||this.api,r=this.base_url+n+"?api_key="+this.api_key+"&count="+t.type;this.getData(r,{},e)},Recalls.prototype.find=function(t,e){var n,r=t.api||this.api;n=t.date?this.base_url+r+"?limit=100&api_key="+this.api_key+"&search=distribution_pattern="+t.location+"+AND+report_date:["+t.date[0]+"+TO+"+t.date[1]+']+AND+classification:"'+t.classification+'"':this.base_url+r+"?limit=100&api_key="+this.api_key+"&search=distribution_pattern="+t.location+'+AND+classification:"'+t.classification+'"',t.status&&(n=n+"+AND+status:"+t.status),t.skip&&(n=n+"&skip="+t.skip),this.getData(n,{},function(t){e(t)})},Recalls.prototype.getData=function(t,e,n){e.type="GET",e.dataType="json",$.ajax(t,e).done(function(t){n(t)}).error(function(t){console.log("err",t),404===t.status&&t.responseJSON&&n(t.responseJSON.error)})}(function(){function t(t){this._value=t}function e(t,e,n,r){var i,a,o=Math.pow(10,e);return a=(n(t*o)/o).toFixed(e),r&&(i=new RegExp("0{1,"+r+"}$"),a=a.replace(i,"")),a}function n(t,e,n){var r;return r=e.indexOf("$")>-1?i(t,e,n):e.indexOf("%")>-1?a(t,e,n):e.indexOf(":")>-1?o(t,e):l(t._value,e,n)}function r(t,e){var n,r,i,a,o,l=e,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],s=!1;if(e.indexOf(":")>-1)t._value=u(e);else if(e===g)t._value=0;else{for("."!==h[v].delimiters.decimal&&(e=e.replace(/\./g,"").replace(h[v].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+h[v].abbreviations.thousand+"(?:\\)|(\\"+h[v].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+h[v].abbreviations.million+"(?:\\)|(\\"+h[v].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+h[v].abbreviations.billion+"(?:\\)|(\\"+h[v].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+h[v].abbreviations.trillion+"(?:\\)|(\\"+h[v].currency.symbol+")?(?:\\))?)?$"),o=0;o<=c.length&&!(s=e.indexOf(c[o])>-1?Math.pow(1024,o+1):!1);o++);t._value=(s?s:1)*(l.match(n)?Math.pow(10,3):1)*(l.match(r)?Math.pow(10,6):1)*(l.match(i)?Math.pow(10,9):1)*(l.match(a)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=s?Math.ceil(t._value):t._value}return t._value}function i(t,e,n){var r,i,a=e.indexOf("$"),o=e.indexOf("("),u=e.indexOf("-"),c="";return e.indexOf(" $")>-1?(c=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(c=" ",e=e.replace("$ ","")):e=e.replace("$",""),i=l(t._value,e,n),1>=a?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),r=1,(o>a||u>a)&&(r=0),i.splice(r,0,h[v].currency.symbol+c),i=i.join("")):i=h[v].currency.symbol+c+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,c+h[v].currency.symbol),i=i.join("")):i=i+c+h[v].currency.symbol,i}function a(t,e,n){var r,i="",a=100*t._value;return e.indexOf(" %")>-1?(i=" ",e=e.replace(" %","")):e=e.replace("%",""),r=l(a,e,n),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,i+"%"),r=r.join("")):r=r+i+"%",r}function o(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),r=Math.round(t._value-60*e*60-60*n);return e+":"+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)}function u(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function l(t,n,r){var i,a,o,u,l,c,s=!1,f=!1,p=!1,d="",_=!1,y=!1,m=!1,b=!1,w=!1,x="",A="",O=Math.abs(t),$=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],M="",S=!1;if(0===t&&null!==g)return g;if(n.indexOf("(")>-1?(s=!0,n=n.slice(1,-1)):n.indexOf("+")>-1&&(f=!0,n=n.replace(/\+/g,"")),n.indexOf("a")>-1&&(_=n.indexOf("aK")>=0,y=n.indexOf("aM")>=0,m=n.indexOf("aB")>=0,b=n.indexOf("aT")>=0,w=_||y||m||b,n.indexOf(" a")>-1?(d=" ",n=n.replace(" a","")):n=n.replace("a",""),O>=Math.pow(10,12)&&!w||b?(d+=h[v].abbreviations.trillion,t/=Math.pow(10,12)):O<Math.pow(10,12)&&O>=Math.pow(10,9)&&!w||m?(d+=h[v].abbreviations.billion,t/=Math.pow(10,9)):O<Math.pow(10,9)&&O>=Math.pow(10,6)&&!w||y?(d+=h[v].abbreviations.million,t/=Math.pow(10,6)):(O<Math.pow(10,6)&&O>=Math.pow(10,3)&&!w||_)&&(d+=h[v].abbreviations.thousand,t/=Math.pow(10,3))),n.indexOf("b")>-1)for(n.indexOf(" b")>-1?(x=" ",n=n.replace(" b","")):n=n.replace("b",""),o=0;o<=$.length;o++)if(i=Math.pow(1024,o),a=Math.pow(1024,o+1),t>=i&&a>t){x+=$[o],i>0&&(t/=i);break}return n.indexOf("o")>-1&&(n.indexOf(" o")>-1?(A=" ",n=n.replace(" o","")):n=n.replace("o",""),A+=h[v].ordinal(t)),n.indexOf("[.]")>-1&&(p=!0,n=n.replace("[.]",".")),u=t.toString().split(".")[0],l=n.split(".")[1],c=n.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),M=e(t,l[0].length+l[1].length,r,l[1].length)):M=e(t,l.length,r),u=M.split(".")[0],M=M.split(".")[1].length?h[v].delimiters.decimal+M.split(".")[1]:"",p&&0===Number(M.slice(1))&&(M="")):u=e(t,null,r),u.indexOf("-")>-1&&(u=u.slice(1),S=!0),c>-1&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h[v].delimiters.thousands)),0===n.indexOf(".")&&(u=""),(s&&S?"(":"")+(!s&&S?"-":"")+(!S&&f?"+":"")+u+M+(A?A:"")+(d?d:"")+(x?x:"")+(s&&S?")":"")}function c(t,e){h[t]=e}function s(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function f(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var n=s(t),r=s(e);return n>r?n:r},-1/0)}var p,d="1.5.3",h={},v="en",g=null,_="0,0",y="undefined"!=typeof module&&module.exports;p=function(e){return p.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=p.fn.unformat(e)),new t(Number(e))},p.version=d,p.isNumeral=function(e){return e instanceof t},p.language=function(t,e){if(!t)return v;if(t&&!e){if(!h[t])throw new Error("Unknown language : "+t);v=t}return(e||!h[t])&&c(t,e),p},p.languageData=function(t){if(!t)return h[v];if(!h[t])throw new Error("Unknown language : "+t);return h[t]},p.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),p.zeroFormat=function(t){g="string"==typeof t?t:null},p.defaultFormat=function(t){_="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r,i=this.length>>>0,a=!1;for(1<arguments.length&&(r=e,a=!0),n=0;i>n;++n)this.hasOwnProperty(n)&&(a?r=t(r,this[n],n,this):(r=this[n],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return r}),p.fn=t.prototype={clone:function(){return p(this)},format:function(t,e){return n(this,t?t:_,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:r(this,t?t:_)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+n*e}var n=f.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/n,this},subtract:function(t){function e(t,e){return t-n*e}var n=f.call(null,this._value,t);return this._value=[t].reduce(e,this._value*n)/n,this},multiply:function(t){function e(t,e){var n=f(t,e);return t*n*e*n/(n*n)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var n=f(t,e);return t*n/(e*n)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(p(this._value).subtract(t).value())}},y&&(module.exports=p),"undefined"==typeof ender&&(this.numeral=p),"function"==typeof define&&define.amd&&define([],function(){return p})}).call(this);var App=function(){var t=this;$(document).ajaxStart(function(){NProgress.start()}),$(document).ajaxStop(function(){NProgress.done()}),$("#list").hide(),this.searchOptions={skip:0},this.states=this._getStates(),this.stateGeoms=this._getStateGeoms(),this.createMap(),this.addStatesLayer(),this.constructUI(),this._wire(),recalls.count({type:"state"},function(e){t.enforcementCountByState(e.results),t.createHomeChart(e.results,"Recall Enforcement Count by State")})};App.prototype.createMap=function(){var t=this;this.map=L.map("map").setView([38.891,-80.94],4),L.esri.basemapLayer("Gray").addTo(this.map);var e=new L.esri.Geocoding.Controls.Geosearch({useMapBounds:!0,zoomToResult:!1}).addTo(this.map);e.on("results",function(e){var n=e.results[0].properties.Region;("Washington, D.C."===n||"District of Columbia"===n)&&(n="DC"),_.each(t.states,function(t,e){t===n&&(n=e)}),$(".detail-list").empty(),t._clearLayers(),t.selectedStateAbbr=n,t._stateSelected=!0,t.statesLayer.eachFeature(function(e){e.feature.properties.STATE_ABBR===n&&(t.selectedState=e,t.selectState())}),t.searchOptions.text=n,t._find()})},App.prototype.addStatesLayer=function(){this.statesLayer=L.esri.featureLayer("http://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/USA_States_Generalized/FeatureServer/0",{style:function(t){return{color:"#7fbbdf",stroke:"#FFF",weight:1}}}).addTo(this.map)},App.prototype.addKoopLayer=function(){var t=0;this.koopLayer=L.esri.featureLayer("http://services.arcgis.com/bkrWlSKcjUDFDtgw/arcgis/rest/services/FDA_Food_Recall_Enforcement/FeatureServer/0",{style:function(e){return t++,{fillColor:"#000",color:"#FFF",weight:1}}}).addTo(this.map)},App.prototype.constructUI=function(){var t='<div id="search-helper" class="leaflet-bar">Or select location on map</div>';$(".geocoder-control input").attr("placeholder","Search for places or addresses"),$(".geocoder-control").addClass("geocoder-control-expanded").append(t)},App.prototype.selectState=function(){if($("#legend").hide(),this.statesLayer.setStyle(function(t){return{fillColor:"#FFF",color:"#CCC",weight:1,fillOpacity:.3}}),this.selectedState){var t=this.selectedState.layer?this.selectedState.layer:this.selectedState;t.setStyle({weight:1,fillColor:"#1a3d88",dashArray:"",fillOpacity:.3}),L.Browser.ie||L.Browser.opera||t.bringToFront()}},App.prototype.enforcementCountByState=function(t){function e(t){return t>1e3?"#084594":t>500?"#2171b5":t>200?"#4292c6":t>100?"#6baed6":t>50?"#9ecae1":t>20?"#c6dbef":t>10?"#deebf7":"#f7fbff"}var n=_.keys(this.states),r={};_.each(t,function(t){_.contains(n,t.term.toUpperCase())&&(r[t.term.toUpperCase()]=t.count)}),this.statesLayer.setStyle(function(t){var n=r[t.properties.STATE_ABBR];return{fillColor:e(n),color:"#EEE",weight:.9,fillOpacity:.5}}),$("#legend-title").html("Recall Enforcement Count by State"),$("#legend-item-1").css({background:"#084594"}),$("#legend-item-2").css({background:"#4292c6"}),$("#legend-item-3").css({background:"#6baed6"}),$("#legend-item-4").css({background:"#c6dbef"}),$("#legend-item-5").css({background:"#deebf7"}),$("#legend-item-6").css({background:"#f7fbff"}),$("#legend-min").html("<10"),$("#legend-max").html(">1,000"),this.enforceData=t},App.prototype.showList=function(t,e,n){var r=this;return $("#list").empty(),$("#list-header").html(e),$("#detail-item").empty().hide(),$("#detail-tabs").show(),$("#list-container").show(),t.message?void("Class+I"===t.classification?($("#danger-list").append('<div class="no-results">'+t.message+"</div>"),$("#danger-count").html("(0)")):"Class+II"===t.classification?($("#slight-list").append('<div class="no-results">'+t.message+"</div>"),$("#slight-count").html("(0)")):"Class+III"===t.classification&&($("#unlikely-list").append('<div class="no-results">'+t.message+"</div>"),$("#unlikely-count").html("(0)"))):void _.each(t.results,function(e){var n=e.distribution_pattern;n=n.split(/[ ,\n]+/);var i=[e.state];_.each(n,function(t){r.states[t]&&i.push(t)}),i=i.length,(_.contains(n,"nationwide")||_.contains(n,"Nationwide"))&&(i=50);var a='<li class="list-element animated slideInRight">        <div class="recalling-firm">'+e.recalling_firm+'</div>        <div class="detail-text caps">'+moment(e.recall_initiation_date,"YYYYMMDD").format("MMMM DD, YYYY")+' – <span class="caps '+e.status.toLowerCase()+'">'+e.status+'</span></div>        <div><span class="list-title">Recalled Product Source</span>: '+r.states[e.state]+'</div>        <div><span class="list-title">Number of States Impacted</span>: '+i+'</div>        <div class="recall-item-description"><span class="recall-item-description-title">Description</span>: '+e.product_description+'</div>        <div class="show-details" id="'+e.recall_number+'"><i class="glyphicon glyphicon-search"></i> Show Details</div>      </li>';"Class+I"===t.classification?($("#danger-list").append(a),$("#danger-count").html("("+t.meta.results.total+")")):"Class+II"===t.classification?($("#slight-list").append(a),$("#slight-count").html("("+t.meta.results.total+")")):"Class+III"===t.classification&&($("#unlikely-list").append(a),$("#unlikely-count").html("("+t.meta.results.total+")"))})},App.prototype.showDetails=function(t){_.each(this.data,function(e){if(e.recall_number===t){$("#detail-tabs").hide(),$("#list-header").hide(),$("#list-detail-header").show(),$("#list-detail-header").html('<span class="glyphicon glyphicon-chevron-left" id="back"></span> '+e.recalling_firm);var n='<div>          <div class="detail-section">            <div class="detail-title">Reason for Recall</div>            <div class="detail-text">'+e.reason_for_recall+'</div>          </div>          <div class="detail-section">            <div class="detail-title">Product Description</div>            <div class="detail-text">'+e.product_description+'</div>          </div>          <div class="detail-section">            <div class="col-md-6">              <div class="detail-title">Initiation Date</div>              <div class="detail-text">'+moment(e.recall_initiation_date,"YYYYMMDD").format("MMMM DD, YYYY")+'</div>            </div>            <div class="col-md-6">              <div class="detail-title">Report Date</div>              <div class="detail-text">'+moment(e.report_date,"YYYYMMDD").format("MMMM DD, YYYY")+'</div>            </div>          </div>          <div class="detail-section">            <div class="col-md-6">              <div class="detail-title">Recall Number</div>              <div class="detail-text">'+e.recall_number+'</div>            </div>            <div class="col-md-6">              <div class="detail-title">Status</div>              <div class="detail-text">'+e.status+'</div>            </div>          </div>          <div class="detail-section">            <div class="col-md-6">              <div class="detail-title">Classification</div>              <div class="detail-text">'+e.classification+'</div>            </div>            <div class="col-md-6">              <div class="detail-title">Initiated by</div>              <div class="detail-text">'+e.recalling_firm+'</div>            </div>          </div>          <div class="detail-section">            <div class="detail-title">Quantity</div>            <div class="detail-text">'+e.product_quantity+'</div>          </div>          <div class="detail-section">            <div class="detail-title">Distribution Pattern</div>            <div class="detail-text">'+e.distribution_pattern+"</div>          </div>        </div>";

$("#detail-item").show(),$("#detail-item").append(n)}}),$("#list-detail-header").on("click",function(){$("#list-detail-header").hide(),$("#detail-item").hide(),$("#detail-tabs").show(),$("#list-header").show()})},App.prototype.createHomeChart=function(t,e){var n=this;this.data=t,$("#list").show(),$("#detail-tabs").hide(),$("#list").empty(),$(".detail-list").empty(),$("#list-header").html(e),$("#detail-item").empty().hide();var r='<div id="home-chart"></div>';$("#list").append(r);var i={};i.features=[],i.fields=[{name:"state",type:"esriFieldTypeString",alias:"state"},{name:"count",type:"esriFieldTypeString",alias:"count"}],_.each(t,function(t){var e={attributes:{state:t.term,count:t.count}};"BC"!==t.term.toUpperCase()&&"PQ"!==t.term.toUpperCase()&&"ON"!==t.term.toUpperCase()&&"PR"!==t.term.toUpperCase()&&"KS"!==t.term.toUpperCase()&&"MT"!==t.term.toUpperCase()&&"DC"!==t.term.toUpperCase()&&"WY"!==t.term.toUpperCase()&&i.features.push(e)});var a=new Cedar({type:"bar-horizontal"}),o={data:i,mappings:{x:{field:"count",label:"count"},y:{field:"state",label:"state"}}};a.dataset=o,a.override={height:410,axes:[{titleOffset:0,title:"",properties:{labels:{fontSize:{value:9}}}},{titleOffset:40,title:"",properties:{labels:{fontSize:{value:9}}}}],marks:[{properties:{hover:{fill:{value:"#4292c6"}},update:{fill:{value:"#2171b5"},opacity:{value:.5}}}}]},a.show({elementId:"#home-chart"}),a.on("click",function(t,e){var r=e.state.toUpperCase();$(".detail-list").empty(),n._clearLayers(),n.selectedStateAbbr=r,n._stateSelected=!0,n.statesLayer.eachFeature(function(t){t.feature.properties.STATE_ABBR===r&&(n.selectedState=t,n.selectState())}),n.searchOptions.text=r,n._find()})},App.prototype._wire=function(){var t=this;$(".geocoder-control input").on("blur",function(){$(this).attr("placeholder","Search for places or addresses"),$(".geocoder-control").addClass("geocoder-control-expanded")}),this.statesLayer.on("click",function(e){$(".detail-list").empty(),$("#list-detail-header").hide(),$("#detail-item").hide(),$("#detail-tabs").show(),$("#list-header").show();var n=e.layer.feature.properties.STATE_ABBR;t.searchOptions.text=n,t._find(),t._clearLayers(),t.selectedStateAbbr=n,t._stateSelected=!0,t.selectedState=e,t.selectState()}),this.statesLayer.on("mouseover",function(t){var e=t.layer;e.setStyle({weight:1,dashArray:"",fillColor:"#999",fillOpacity:.3}),L.Browser.ie||L.Browser.opera||e.bringToFront()}),this.statesLayer.on("mouseout",function(e){t._stateSelected?t.selectState():t.enforcementCountByState(t.enforceData)}),$("#close-list").on("click",function(){$("#list-container").hide()}),$("#filter-by-date").on("change",function(e){var n,r=$(e.target).val();n="6 Months"===r?moment().subtract(182,"day").format("YYYYMMDD"):"1 Year"===r?moment().subtract(365,"day").format("YYYYMMDD"):"3 Years"===r?moment().subtract(1095,"day").format("YYYYMMDD"):null;var i=moment().format("YYYYMMDD");t.searchOptions.date=n?[n,i]:null,t._find()}),$("#filter-by-status").on("change",function(e){var n=$(e.target).val(),r=["OnGoing","Completed","Terminated","Pending"];n=_.contains(r,n)?n:null,t.searchOptions.status=n,t._find()}),$("#download-button").on("click",function(t){NProgress.start(),t.stopPropagation(),setTimeout(function(){NProgress.done()},3e3)})},App.prototype._wireList=function(){var t=this,e=$(".detail-list").offset().top,n=$("#list-container").offset().top,r=$("#list-container").height();$(".detail-list").css({height:r-(e-n)+10+"px"}),$(".list-element").off("mouseenter"),$(".show-details").off("click"),$("#overview").off("click"),$(".detail-list").off("scroll"),$(".list-element").on("mouseenter",function(e){$(".list-element").removeClass("selected"),$(this).addClass("selected");var n=$(this).children(".show-details").attr("id");t._drawArcs(n)}),$(".show-details").on("click",function(e){var n=e.target.id;t.showDetails(n)}),$("#overview").on("click",function(e){t.arcsLayer&&t._clearLayers(),t._stateSelected=!1,t.enforcementCountByState(t.enforceData),t.createHomeChart(t.enforceData,"Recall Enforcement Count by State"),$("#legend").show(),$("#census").hide()}),$(".detail-list").on("scroll",function(){if($(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight){t._clearLayers();var e,n=$(this).attr("id");"danger-list"===n&&(e="Class+I"),"slight-list"===n&&(e="Class+II"),"unlikely-list"===n&&(e="Class+III"),t.searchOptions.classification=e;var r=t.searchOptions.skip,i=t.meta[e].results.total,a=t.meta[e].results.limit;i+a>r+a&&(t.searchOptions.skip=t.searchOptions.skip+a,t._add())}})},App.prototype._clearLayers=function(){this.arcsLayer&&this.arcsLayer.clearLayers(),this.endLayer&&(this.map.removeLayer(this.endLayer),this.endLayer=null),this.sourceLayer&&this.map.removeLayer(this.sourceLayer)},App.prototype._drawArcs=function(t){var e=this;this.arcsLayer||(this.arcsLayer=L.geoJson().addTo(this.map)),e._clearLayers();var n=[];_.each(this.data,function(r){function i(t,e){t.properties&&e.bindPopup("<b>Recalling firm: "+t.properties.name+"</b><br />"+r.product_quantity+"<br /><br />"+r.product_description)}if(r.recall_number===t){var a=r.distribution_pattern;if(a=a.split(/[ ,\n]+/),(_.contains(a,"nationwide")||_.contains(a,"Nationwide"))&&(a=["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VA","VT","WA","WI","WV","WY"]),_.each(a,function(t){if(t=_.trim(t.toUpperCase()),void 0!==e.stateGeoms[t]&&t!==r.state){var i={x:e.stateGeoms[r.state].longitude,y:e.stateGeoms[r.state].latitude},a={x:e.stateGeoms[t].longitude,y:e.stateGeoms[t].latitude};n.push(a);var o=new arc.GreatCircle(i,a,{name:"Seattle to DC"}),u=o.Arc(100,{offset:10});u=u.json(),e.arcsLayer.addData(u),e.arcsLayer.setStyle({color:"#000",opacity:1,weight:.5})}}),n.length>0){var o=[];_.each(n,function(t){var e={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.x,t.y]}};o.push(e)});var u={radius:2,fillColor:"#0079c1",color:"#FFF",weight:1,opacity:1,fillOpacity:.8};e.endLayer=L.geoJson(o,{pointToLayer:function(t,e){return L.circleMarker(e,u)}}).addTo(e.map)}var l={type:"Feature",properties:{name:r.recalling_firm,state:r.state},geometry:{type:"Point",coordinates:[e.stateGeoms[r.state].longitude,e.stateGeoms[r.state].latitude]}};e.sourceLayer=L.geoJson(l,{onEachFeature:i}).addTo(e.map),e._censusStats(a)}})},App.prototype._censusStats=function(t){var e=0;t.push(this.selectedStateAbbr),this.statesLayer.eachFeature(function(n){_.contains(t,n.feature.properties.STATE_ABBR)&&(e+=n.feature.properties.POP2012)}),formattedPop=numeral(e).format("0,0"),$("#census").show(),$("#total-pop").html(formattedPop);var n=313129017,r=parseInt(e/n*100);$("#percent-of-total").html(r+"%")},App.prototype._updateDownloadUrl=function(t){var e,n="http://koop-fda-1504637322.us-east-1.elb.amazonaws.com/FDA.csv";e=encodeURI(t.date?"distribution_pattern like '%"+t.location+"%' AND report_date > "+t.date[0]:"distribution_pattern like '%"+t.location+"%'"),n=n+"?where="+e,this.downloadUrl=n,$("#download-button").prop("href",n)},App.prototype._find=function(t){var e=this;$(".detail-list").empty(),e._clearLayers(),this.data=[],this.meta={};var t=this.searchOptions,n={};n.location=t.text,n.date=t.date?t.date:null,n.status=t.status?t.status:null,n.api="food/enforcement.json",this._updateDownloadUrl(n);var r=["Class+I","Class+II","Class+III"];_.each(r,function(r,i){n.classification=r,recalls.find(n,function(n){n.classification=r,e.meta[r]=n.meta,e.showList(n,e.states[t.text]+' Recall List <span id="overview" style="cursor:pointer;font-size: 0.6em;float: right;margin-top: 4px;color: #337ab7;">Back to Overview</span>',"recalls"),e.data=_.union(e.data,n.results),e._wireList()})})},App.prototype._add=function(t){var e=this;e._clearLayers();var t=this.searchOptions,n={};n.location=t.text,n.date=t.date?t.date:null,n.status=t.status?t.status:null,n.classification=t.classification?t.classification:null,n.skip=t.skip?t.skip:0,n.api="food/enforcement.json";recalls.find(n,function(r){r.classification=n.classification,e.meta[n.classification]=r.meta,e.showList(r,e.states[t.text]+' Recall List <span id="overview" style="cursor:pointer;font-size: 0.6em;float: right;margin-top: 4px;color: #337ab7;">Back to Overview</span>',"recalls"),e.data=_.union(e.data,r.results),e._wireList()})},App.prototype._getStates=function(){return{AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}},App.prototype._getStateGeoms=function(){return{AK:{latitude:61.385,longitude:-152.2683},AL:{latitude:32.799,longitude:-86.8073},AR:{latitude:34.9513,longitude:-92.3809},AS:{latitude:14.2417,longitude:-170.7197},AZ:{latitude:33.7712,longitude:-111.3877},CA:{latitude:36.17,longitude:-119.7462},CO:{latitude:39.0646,longitude:-105.3272},CT:{latitude:41.5834,longitude:-72.7622},DC:{latitude:38.8964,longitude:-77.0262},DE:{latitude:39.3498,longitude:-75.5148},FL:{latitude:27.8333,longitude:-81.717},GA:{latitude:32.9866,longitude:-83.6487},HI:{latitude:21.1098,longitude:-157.5311},IA:{latitude:42.0046,longitude:-93.214},ID:{latitude:44.2394,longitude:-114.5103},IL:{latitude:40.3363,longitude:-89.0022},IN:{latitude:39.8647,longitude:-86.2604},KS:{latitude:38.5111,longitude:-96.8005},KY:{latitude:37.669,longitude:-84.6514},LA:{latitude:31.1801,longitude:-91.8749},MA:{latitude:42.2373,longitude:-71.5314},MD:{latitude:39.0724,longitude:-76.7902},ME:{latitude:44.6074,longitude:-69.3977},MI:{latitude:43.3504,longitude:-84.5603},MN:{latitude:45.7326,longitude:-93.9196},MO:{latitude:38.4623,longitude:-92.302},MP:{latitude:14.8058,longitude:145.5505},MS:{latitude:32.7673,longitude:-89.6812},MT:{latitude:46.9048,longitude:-110.3261},NC:{latitude:35.6411,longitude:-79.8431},ND:{latitude:47.5362,longitude:-99.793},NE:{latitude:41.1289,longitude:-98.2883},NH:{latitude:43.4108,longitude:-71.5653},NJ:{latitude:40.314,longitude:-74.5089},NM:{latitude:34.8375,longitude:-106.2371},NV:{latitude:38.4199,longitude:-117.1219},NY:{latitude:42.1497,longitude:-74.9384},OH:{latitude:40.3736,longitude:-82.7755},OK:{latitude:35.5376,longitude:-96.9247},OR:{latitude:44.5672,longitude:-122.1269},PA:{latitude:40.5773,longitude:-77.264},PR:{latitude:18.2766,longitude:-66.335},RI:{latitude:41.6772,longitude:-71.5101},SC:{latitude:33.8191,longitude:-80.9066},SD:{latitude:44.2853,longitude:-99.4632},TN:{latitude:35.7449,longitude:-86.7489},TX:{latitude:31.106,longitude:-97.6475},UT:{latitude:40.1135,longitude:-111.8535},VA:{latitude:37.768,longitude:-78.2057},VI:{latitude:18.0001,longitude:-64.8199},VT:{latitude:44.0407,longitude:-72.7093},WA:{latitude:47.3917,longitude:-121.5708},WI:{latitude:44.2563,longitude:-89.6385},WV:{latitude:38.468,longitude:-80.9696},WY:{latitude:42.7475,longitude:-107.2085}}};